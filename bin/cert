#!/usr/bin/env python
import time, os, sys, fcntl, struct

# checking priveleges
#if os.geteuid() !=  0:
#    print("ERROR: Must be root to export certificates")
#    sys.exit(1)
    
# Variables
hardware = dict()
dir = "/home/adria/GitHub/Donator/etc"
dirs = os.listdir(dir)
cert = ".cert"

# Function definition
def get_cert(x):
	return dir + "/" + x
def get_deive(x):
	return "/dev/" + x[:3]
def get_timestamp():
	return time.strftime("%Y-%m-%d %H:%M:%S")
#def get_serial():

# FOR every certificate, do...
for file in dirs:
	if file.endswith(cert):
		hardware['cert'] =  get_cert(file)
		hardware['device'] = get_deive(file)
		hardware['timestamp'] = get_timestamp()

# Program
		print(hardware)
